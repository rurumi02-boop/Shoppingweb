# 網頁功能測試步驟指南

## 📋 測試前準備

### 1. 確認環境設定

#### ✅ 檢查 Firebase 憑證
```powershell
# 確認憑證檔案是否存在
Test-Path C:\CampingData\firebase-credentials.json
```
- **必須存在**：`firebase-credentials.json` 在專案根目錄
- 如果不存在，請參考 `FIREBASE_MIGRATION.md` 的設定步驟

#### ✅ 檢查 Python 版本
```powershell
# 確認 Python 3.11 可用
py -3.11 --version
```
應該顯示：`Python 3.11.x`

#### ✅ 檢查依賴套件
```powershell
# 確認已安裝所有依賴
py -3.11 -m pip list
```
重要套件：
- Django 3.2.9
- firebase-admin
- 其他必要套件

### 2. 啟動開發伺服器

```powershell
# 切換到專案目錄
cd C:\CampingData

# 啟動開發伺服器
py -3.11 manage.py runserver
```

**成功啟動後會看到：**
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

### 3. 開啟瀏覽器

在瀏覽器中開啟：**http://127.0.0.1:8000/**

---

## 🧪 功能測試步驟

### 一、基本頁面測試

#### ✅ 測試 1：首頁瀏覽
**URL**：`http://127.0.0.1:8000/`

**測試項目**：
- [ ] 頁面能正常載入，沒有錯誤訊息
- [ ] 可以看到網站標題和導航列
- [ ] 可以看到分類商品展示
- [ ] 所有連結和按鈕正常顯示

**預期結果**：首頁正常顯示，分類商品區塊可見

---

#### ✅ 測試 2：新商品頁面
**URL**：`http://127.0.0.1:8000/new_products/`

**測試項目**：
- [ ] 頁面能正常載入
- [ ] 顯示最近 30 天的新商品
- [ ] 商品資訊完整（名稱、價格、圖片等）
- [ ] 可以點擊商品查看詳情

**預期結果**：顯示新商品列表（如果 Firebase 中有資料）

---

#### ✅ 測試 3：聯絡資訊頁面
**URL**：`http://127.0.0.1:8000/contact/`

**測試項目**：
- [ ] 頁面能正常載入
- [ ] 顯示聯絡方式資訊
- [ ] 表單功能正常（如有）

**預期結果**：聯絡資訊頁面正常顯示

---

### 二、商品功能測試

#### ✅ 測試 4：商品列表頁面
**URL**：`http://127.0.0.1:8000/products/`

**測試項目**：
- [ ] 頁面能正常載入
- [ ] **每頁顯示 10 個商品**（檢查分頁）
- [ ] 分頁功能正常運作（如果商品超過 10 個）
- [ ] 分類篩選功能正常
- [ ] 品牌篩選功能正常
- [ ] 關鍵字搜尋功能正常
- [ ] 商品卡片顯示完整資訊（名稱、價格、圖片）
- [ ] 點擊商品可以進入詳情頁

**預期結果**：
- 商品列表正常顯示
- 分頁功能運作良好
- 搜尋和篩選功能正常

---

#### ✅ 測試 5：商品詳情頁面（蝦皮風格）
**URL**：`http://127.0.0.1:8000/products/product/<商品ID>/`

**進入方式**：從商品列表點擊任一商品

**測試項目 - 基本資訊**：
- [ ] 商品名稱正確顯示
- [ ] 商品介紹（description）正確顯示
- [ ] 價格正確顯示（支援價格區間）
- [ ] 商品圖片正常顯示

**測試項目 - 評等和評價**：
- [ ] 星級評等顯示（1-5 顆星）
- [ ] 平均評等計算正確
- [ ] 評價數量顯示
- [ ] 評價列表正常顯示（使用者名稱、日期、評等、評論內容）

**測試項目 - 購買功能**：
- [ ] **加入購物車按鈕**可見且可點擊
- [ ] **直接購買按鈕**可見且可點擊
- [ ] **購買數量下拉選單**（1-10）正常運作
- [ ] 選擇數量後，加入購物車功能正常

**測試項目 - 商品變體選擇**：
- [ ] 款式/顏色選擇按鈕可點選（如果商品有變體）
- [ ] 選擇變體後，加入購物車功能正常
- [ ] 客製化商品提示正常顯示（如為客製化商品）

**測試項目 - 其他功能**：
- [ ] 運送說明正常顯示
- [ ] 服務與保障說明正常顯示
- [ ] **收藏功能**（加入/取消收藏）正常運作
- [ ] 麵包屑導航正常顯示

**預期結果**：
- 商品詳情頁面類似蝦皮風格，功能完整
- 所有互動元素正常運作

---

### 三、使用者功能測試

#### ✅ 測試 6：使用者註冊
**URL**：`http://127.0.0.1:8000/register/`

**測試步驟**：
1. 進入註冊頁面
2. 填寫註冊表單：
   - 使用者名稱
   - 電子郵件
   - 密碼
   - 確認密碼
3. 點擊註冊按鈕

**測試項目**：
- [ ] 註冊表單正常顯示
- [ ] 表單驗證正常（必填欄位、密碼確認等）
- [ ] 註冊成功後，使用者資料同時創建在 Django 和 Firebase
- [ ] 註冊後自動登入或跳轉到登入頁面
- [ ] 錯誤訊息正確顯示（如使用者名稱已存在）

**預期結果**：
- 新使用者成功註冊
- 資料正確儲存到 Firebase

---

#### ✅ 測試 7：使用者登入
**URL**：`http://127.0.0.1:8000/userlogin/`

**測試步驟**：
1. 使用已註冊的帳號登入
2. 輸入使用者名稱和密碼
3. 點擊登入按鈕

**測試項目**：
- [ ] 登入表單正常顯示
- [ ] 登入成功後，可以看到使用者資訊
- [ ] 登入狀態正確保持（session）
- [ ] 登入後導航列顯示使用者名稱或登出按鈕
- [ ] 錯誤訊息正確顯示（如密碼錯誤）

**預期結果**：
- 使用者成功登入
- 登入狀態正確維持

---

#### ✅ 測試 8：使用者資訊頁面
**URL**：`http://127.0.0.1:8000/user_info/`

**前置條件**：必須先登入

**測試項目**：
- [ ] 頁面能正常載入（需登入）
- [ ] 顯示使用者個人資訊
- [ ] 顯示訂單列表（如有訂單）
- [ ] 顯示我的最愛列表（如有收藏）
- [ ] 訂單詳情可正常查看

**預期結果**：
- 使用者資訊頁面正常顯示
- 訂單和我的最愛正確顯示

---

#### ✅ 測試 9：使用者登出
**URL**：點擊登出按鈕或 `http://127.0.0.1:8000/logout/`

**測試項目**：
- [ ] 登出功能正常運作
- [ ] 登出後跳轉到首頁或登入頁
- [ ] 登出後無法訪問需要登入的頁面
- [ ] 購物車內容保留（如設計要求）

**預期結果**：
- 使用者成功登出
- 登入狀態正確清除

---

### 四、購物車功能測試

#### ✅ 測試 10：加入購物車
**URL**：在商品詳情頁點擊「加入購物車」按鈕

**測試步驟**：
1. 瀏覽商品列表，進入任一商品詳情頁
2. 選擇購買數量（1-10）
3. 如有變體，選擇變體（顏色、尺寸等）
4. 點擊「加入購物車」按鈕

**測試項目**：
- [ ] 加入購物車按鈕正常運作
- [ ] 可以選擇購買數量
- [ ] 可以選擇商品變體
- [ ] 加入購物車後顯示成功訊息
- [ ] 商品正確加入購物車（使用 Firebase 取得商品資訊）
- [ ] 購物車數量正確更新

**預期結果**：
- 商品成功加入購物車
- 購物車數量正確顯示

---

#### ✅ 測試 11：查看購物車
**URL**：`http://127.0.0.1:8000/cart/`

**測試項目**：
- [ ] 購物車頁面正常載入
- [ ] 顯示所有已加入購物車的商品
- [ ] 商品資訊完整（名稱、價格、數量、圖片）
- [ ] 可以修改商品數量
- [ ] 可以刪除單一商品
- [ ] 總價計算正確
- [ ] 清空購物車功能正常

**預期結果**：
- 購物車頁面正常顯示所有商品
- 所有購物車功能正常運作

---

#### ✅ 測試 12：更新購物車
**URL**：`http://127.0.0.1:8000/cart/update/`

**測試步驟**：
1. 在購物車頁面修改商品數量
2. 點擊更新按鈕

**測試項目**：
- [ ] 可以修改商品數量
- [ ] 更新後總價正確重新計算
- [ ] 更新成功後顯示確認訊息

**預期結果**：
- 購物車更新功能正常

---

#### ✅ 測試 13：刪除購物車商品
**URL**：`http://127.0.0.1:8000/cart/remove/<商品ID>/`

**測試步驟**：
1. 在購物車頁面點擊刪除按鈕
2. 確認刪除（如有確認對話框）

**測試項目**：
- [ ] 可以刪除單一商品
- [ ] 刪除後商品從購物車移除
- [ ] 總價正確重新計算

**預期結果**：
- 商品成功從購物車移除

---

#### ✅ 測試 14：清空購物車
**URL**：`http://127.0.0.1:8000/cart/clear/`

**測試步驟**：
1. 確保購物車中有商品
2. 點擊「清空購物車」按鈕
3. 確認清空（如有確認對話框）

**測試項目**：
- [ ] 清空購物車功能正常
- [ ] 所有商品被移除
- [ ] 購物車顯示為空

**預期結果**：
- 購物車成功清空

---

### 五、訂單功能測試

#### ✅ 測試 15：購物車結帳
**URL**：`http://127.0.0.1:8000/checkout/`

**前置條件**：購物車中至少有一件商品

**測試步驟**：
1. 在購物車頁面點擊「結帳」按鈕
2. 進入結帳頁面

**測試項目**：
- [ ] 結帳頁面正常載入
- [ ] 顯示訂單摘要（商品、數量、價格）
- [ ] 顯示收件人資訊表單
- [ ] 表單驗證正常（必填欄位）
- [ ] 總金額計算正確

**預期結果**：
- 結帳頁面正常顯示
- 所有資訊正確

---

#### ✅ 測試 16：提交訂單
**URL**：`http://127.0.0.1:8000/submit-order/`

**前置條件**：已填寫結帳資訊

**測試步驟**：
1. 在結帳頁面填寫所有必要資訊
2. 點擊「提交訂單」按鈕

**測試項目**：
- [ ] 訂單成功提交
- [ ] 訂單資料正確儲存到 Firebase
- [ ] 訂單編號正確產生
- [ ] 跳轉到訂單成功頁面
- [ ] 購物車自動清空（如設計要求）

**預期結果**：
- 訂單成功創建
- 訂單資料正確儲存

---

#### ✅ 測試 17：訂單成功頁面
**URL**：`http://127.0.0.1:8000/order-success/`

**測試項目**：
- [ ] 訂單成功頁面正常顯示
- [ ] 顯示訂單編號
- [ ] 顯示訂單摘要
- [ ] 可以返回首頁或查看訂單

**預期結果**：
- 訂單成功頁面正常顯示
- 訂單資訊正確

---

#### ✅ 測試 18：直接購買功能
**URL**：`http://127.0.0.1:8000/products/<商品ID>/buy-now/`

**測試步驟**：
1. 在商品詳情頁選擇購買數量
2. 選擇商品變體（如有）
3. 點擊「直接購買」按鈕

**測試項目**：
- [ ] 直接購買按鈕正常運作
- [ ] 可以直接進入結帳流程
- [ ] 訂單中包含正確的商品資訊和數量
- [ ] 可以成功提交訂單

**預期結果**：
- 直接購買功能正常運作
- 結帳流程順暢

---

### 六、我的最愛（收藏）功能測試

#### ✅ 測試 19：加入/取消收藏
**URL**：在商品詳情頁點擊收藏按鈕

**前置條件**：必須先登入

**測試步驟**：
1. 登入帳號
2. 進入任一商品詳情頁
3. 點擊收藏按鈕（心形圖示）

**測試項目**：
- [ ] 收藏按鈕可見且可點擊
- [ ] 點擊後商品加入我的最愛（使用 Firebase 管理）
- [ ] 按鈕狀態改變（如變色或顯示已收藏）
- [ ] 再次點擊可以取消收藏
- [ ] 收藏狀態正確儲存到 Firebase

**預期結果**：
- 收藏功能正常運作
- 收藏狀態正確儲存

---

#### ✅ 測試 20：查看我的最愛
**URL**：`http://127.0.0.1:8000/user_info/`（在我的最愛區塊）

**前置條件**：必須先登入，且至少收藏一件商品

**測試項目**：
- [ ] 在我的最愛區塊顯示已收藏的商品
- [ ] 商品資訊完整（名稱、價格、圖片）
- [ ] 可以點擊商品查看詳情
- [ ] 可以取消收藏

**預期結果**：
- 我的最愛列表正常顯示
- 所有收藏的商品可見

---

### 七、商品管理功能測試

#### ✅ 測試 21：商品編輯器
**URL**：`http://127.0.0.1:8000/products/editor/`

**前置條件**：可能需要管理員權限

**測試步驟**：
1. 進入商品編輯器頁面
2. 填寫商品資訊表單
3. 提交表單

**測試項目**：
- [ ] 商品編輯器頁面正常載入
- [ ] 表單欄位完整（名稱、描述、價格、分類、品牌等）
- [ ] 可以上傳商品圖片
- [ ] 可以設定商品變體
- [ ] 可以設定運送說明、服務保障
- [ ] 商品成功提交到 Firebase

**預期結果**：
- 商品編輯器功能正常
- 新商品成功創建

---

#### ✅ 測試 22：提交新商品
**URL**：`http://127.0.0.1:8000/products/submit_product_add/`

**測試項目**：
- [ ] 商品提交功能正常
- [ ] 商品資料正確儲存到 Firebase
- [ ] 提交成功後顯示確認訊息
- [ ] 可以查看新創建的商品

**預期結果**：
- 新商品成功創建並儲存

---

### 八、其他功能測試

#### ✅ 測試 23：密碼重設
**URL**：`http://127.0.0.1:8000/resetpassword/`

**測試步驟**：
1. 進入密碼重設頁面
2. 輸入電子郵件
3. 提交表單

**測試項目**：
- [ ] 密碼重設頁面正常載入
- [ ] 表單驗證正常
- [ ] 重設連結發送到電子郵件（如已設定郵件服務）
- [ ] 重設流程正常運作

**預期結果**：
- 密碼重設功能正常（需郵件服務支援）

---

#### ✅ 測試 24：變更密碼（已登入）
**URL**：`http://127.0.0.1:8000/user/change-password/`

**前置條件**：必須先登入

**測試步驟**：
1. 登入帳號
2. 進入變更密碼頁面
3. 輸入舊密碼和新密碼
4. 提交表單

**測試項目**：
- [ ] 變更密碼頁面正常載入
- [ ] 表單驗證正常（舊密碼驗證、新密碼確認）
- [ ] 密碼成功變更
- [ ] 變更後可以新密碼登入

**預期結果**：
- 密碼成功變更
- 可以使用新密碼登入

---

## 🔍 進階測試項目

### ✅ 測試 25：搜尋功能
**測試項目**：
- [ ] 關鍵字搜尋正常運作（在記憶體中過濾）
- [ ] 搜尋結果正確顯示
- [ ] 無結果時顯示適當訊息
- [ ] 搜尋不區分大小寫

---

### ✅ 測試 26：分頁功能
**測試項目**：
- [ ] 商品列表每頁顯示 10 個商品
- [ ] 分頁導航正常運作
- [ ] 可以切換到下一頁/上一頁
- [ ] 總頁數正確顯示
- [ ] 當前頁面正確標示

**注意**：由於使用 Firebase，分頁為手動實作

---

### ✅ 測試 27：響應式設計
**測試項目**：
- [ ] 在手機上頁面正常顯示（響應式佈局）
- [ ] 在平板上頁面正常顯示
- [ ] 在電腦上頁面正常顯示
- [ ] 所有按鈕和連結在不同裝置上可正常操作

---

### ✅ 測試 28：Firebase 連線測試
**測試項目**：
- [ ] 啟動伺服器時沒有 Firebase 連線錯誤
- [ ] 所有資料正確從 Firebase 讀取
- [ ] 所有資料正確寫入 Firebase
- [ ] Firebase 憑證正確載入

**檢查方式**：
- 查看終端機是否有錯誤訊息
- 檢查 Firebase Console 是否看到資料變更

---

## ⚠️ 常見問題排查

### 問題 1：伺服器無法啟動
**可能原因**：
- Firebase 憑證檔案不存在或路徑錯誤
- Python 版本不正確
- 依賴套件未安裝

**解決方法**：
1. 確認 `firebase-credentials.json` 存在於專案根目錄
2. 使用 `py -3.11 manage.py runserver` 啟動
3. 執行 `py -3.11 -m pip install -r requirements.txt`

---

### 問題 2：頁面顯示錯誤
**可能原因**：
- Firebase 連線失敗
- 資料結構不正確
- 模板檔案錯誤

**解決方法**：
1. 檢查終端機錯誤訊息
2. 確認 Firebase 憑證正確
3. 檢查 Firebase Console 中的資料結構

---

### 問題 3：功能無法正常運作
**可能原因**：
- JavaScript 錯誤
- 後端邏輯錯誤
- Firebase 權限設定問題

**解決方法**：
1. 開啟瀏覽器開發者工具（F12）檢查 Console 錯誤
2. 檢查終端機的錯誤訊息
3. 確認 Firebase 規則允許讀寫

---

### 問題 4：資料無法顯示
**可能原因**：
- Firebase 中沒有資料
- 資料結構不符合預期
- 查詢邏輯錯誤

**解決方法**：
1. 檢查 Firebase Console 中是否有資料
2. 確認資料結構符合預期（參考 `FIREBASE_MIGRATION.md`）
3. 檢查 `firebase_service.py` 中的查詢邏輯

---

## 📊 測試記錄表

建議在測試時記錄以下資訊：

| 測試項目 | 測試結果 | 備註 |
|---------|---------|------|
| 首頁瀏覽 | ✅ / ❌ | |
| 商品列表 | ✅ / ❌ | |
| 商品詳情 | ✅ / ❌ | |
| 使用者註冊 | ✅ / ❌ | |
| 使用者登入 | ✅ / ❌ | |
| 加入購物車 | ✅ / ❌ | |
| 查看購物車 | ✅ / ❌ | |
| 提交訂單 | ✅ / ❌ | |
| 我的最愛 | ✅ / ❌ | |
| ... | ... | |

---

## ✅ 測試完成檢查清單

在完成所有測試後，確認以下項目：

- [ ] 所有基本頁面正常運作
- [ ] 商品功能完整（列表、詳情、搜尋、篩選）
- [ ] 使用者功能完整（註冊、登入、登出、個人資訊）
- [ ] 購物車功能完整（加入、查看、更新、刪除、清空）
- [ ] 訂單功能完整（結帳、提交、查看）
- [ ] 我的最愛功能正常
- [ ] Firebase 連線穩定
- [ ] 沒有明顯的錯誤或警告
- [ ] 頁面載入速度正常
- [ ] 響應式設計正常

---

## 🎯 測試建議

### 測試順序建議

1. **基礎測試**：先測試基本頁面（首頁、商品列表、商品詳情）
2. **使用者功能**：測試註冊、登入、登出
3. **購物流程**：測試完整的購物流程（加入購物車 → 結帳 → 提交訂單）
4. **進階功能**：測試我的最愛、商品管理等功能

### 測試資料準備

在開始測試前，建議：
1. 在 Firebase 中準備測試商品資料
2. 準備測試使用者帳號
3. 準備測試訂單資料（如有）

### 記錄問題

測試過程中遇到問題時：
1. 記錄問題描述
2. 截圖或錄影（如可能）
3. 記錄錯誤訊息（終端機和瀏覽器 Console）
4. 記錄操作步驟

---

## 📚 相關文件

- `FIREBASE_MIGRATION.md` - Firebase 遷移說明
- `購物網站升級完成說明.md` - 購物網站升級功能說明
- `README.md` - 專案基本說明

---

## ✨ 測試完成

完成所有測試後，您的網站應該：
- ✅ 所有功能正常運作
- ✅ 使用者體驗良好
- ✅ 資料正確儲存和讀取
- ✅ 沒有明顯錯誤

祝測試順利！🎉


