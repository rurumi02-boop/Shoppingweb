# 修復遷移檔案錯誤

## 問題說明

錯誤訊息：
```
TypeError: CheckConstraint.__init__() got an unexpected keyword argument 'condition'
```

**原因**：
- 遷移檔案中使用了錯誤的參數名稱 `condition`
- 正確的參數應該是 `check`
- `models.Q()` 的語法也不正確

## 已修復

已修復 `myapp/migrations/0001_initial.py` 中的錯誤：

**原本（錯誤）**：
```python
models.CheckConstraint(condition=models.Q(('rating__gte', 1), ('rating__lte', 5)), name='rating_range')
```

**修復後（正確）**：
```python
models.CheckConstraint(check=models.Q(rating__gte=1, rating__lte=5), name='rating_range')
```

## 重要：Python 版本問題

從錯誤訊息看到，系統仍在使用 Python 3.14：
```
C:\Users\rurum\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\
```

但您說 `python --version` 顯示 3.11.0，這表示：
- 可能有多個 Python 版本
- PATH 環境變數中 Python 3.14 的順序在 Python 3.11 之前

## 解決方案

### 方法一：使用 py launcher 指定版本

```powershell
# 使用 Python 3.11
py -3.11 manage.py check
py -3.11 manage.py runserver
```

### 方法二：調整 PATH 環境變數

1. **檢查當前 PATH**
   ```powershell
   $env:PATH -split ';' | Select-String Python
   ```

2. **確認 Python 3.11 路徑**
   ```powershell
   py -3.11 -c "import sys; print(sys.executable)"
   ```

3. **手動調整 PATH**（如果需要）
   - 確保 Python 3.11 的路徑在 Python 3.14 之前

## 測試步驟

修復遷移檔案後，使用 Python 3.11 測試：

```powershell
# 使用 Python 3.11
py -3.11 manage.py check

# 應該沒有錯誤

# 啟動伺服器
py -3.11 manage.py runserver
```

## 驗證

執行以下命令確認使用正確的 Python 版本：

```powershell
# 檢查 Python 版本
py -3.11 --version
# 應該顯示：Python 3.11.0

# 檢查 Django
py -3.11 -c "import django; print('Django:', django.get_version())"

# 測試專案
py -3.11 manage.py check
```

